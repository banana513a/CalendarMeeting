@model IQueryable<DBEntity.user_info_detail>
@{
    ViewBag.Title = "用户列表";
    Layout = "~/Views/Shared/_AdminLayout.cshtml";

    int pageNowIndex = ViewBag.PageNowIndex;
    int pageSize = ViewBag.PageSize;
    int pagesCount = ViewBag.PagesCount;
    int pageStartIndex = ViewBag.PageStartIndex;
    int pageEndIndex = ViewBag.PageEndIndex;
}
<div class="u-list">
    <div class="u-act-bar">
        <span class="u-act u-act-create">新建</span><span class="u-act u-act-edit">修改</span><span class="u-act u-act-del">删除</span>
        <div class="clear"></div>
    </div>
    <table class="u-tb">
        <thead>
            <tr>
                <th style="width:50px"></th><th style="text-align:left;">用户名</th><th>会议数</th><th>等级</th><th style=" text-align:left">邮箱</th><th>创建日期</th>
            </tr>
        </thead>
        <tbody>
        @{
            int tick = 1;
        }
        @foreach(DBEntity.user_info_detail item in Model)
        {
            <tr @(tick % 2 == 0 ? "" : "class=u-tb-tr-odd") onclick="userListLineClick(this)">
                <td><input type="checkbox" id="u-item-@item.id" itemid="@item.id" class="u-item-check" /></td>
                <td style="text-align:left;">@item.ui_name</td>
                <td style="text-align:center;">@item.ui_meeting_count</td>
                <td style="text-align:center;">@item.ui_grade_name</td>
                <td style="text-align:left;">@item.ui_email</td>
                <td style="text-align:center;">@item.ui_create_time.ToString("yyyy-MM-dd HH:mm")</td>
            </tr>
            tick++;
        }
        </tbody>
    </table>
</div>
<div class="page_list">
    <ul class="pg_ul">
        @if(pageNowIndex > 1)
        {
            if(pagesCount > 9)
            {
            <li class="f">@Html.ActionLink("首页", null, new { p = 1})</li>
            }
            <li class="p">@Html.ActionLink("上一页", null, new { p = pageNowIndex - 1})</li>
        }
        @if(pagesCount != 1)
        {
            for(int i = pageStartIndex; i <= pageEndIndex; i++)
            {
            <li class="i">
                @if(i == pageNowIndex)
                {
                    <strong>@i</strong>
                }
                else
                {
                    @Html.ActionLink(i.ToString(), null, new { p = i});
                }
            </li>
            }
        }
        @if(pagesCount > pageNowIndex)
        {
            <li class="n">@Html.ActionLink("下一页", null, new { p = pageNowIndex + 1 })</li>
            if(pagesCount > 9)
            {
            <li class="l">@Html.ActionLink("末页", null, new { p = pagesCount })</li>
            }
        }
    </ul>
</div>
<script type="text/javascript">

    function userListLineClick(e) {
        var itemChecker = $(e).find('.u-item-check');
        itemChecker.trigger('click');

        if (itemChecker.is(':checked')) {
            $(e).addClass('u-item-selected');
        } else {
            $(e).removeClass('u-item-selected');
        }
        event.stopPropagation();
    }

    $('.u-item-check').click(function (event) {
        if ($(this).is(':checked')) {
            $('.u-act').addClass('u-act-selected');
            $(this).parents('tr').addClass('u-item-selected');
        } else {
            $(this).parents('tr').removeClass('u-item-selected');
            if ($('.u-item-check:checked').length == 0) {
                $('.u-act').removeClass('u-act-selected');
            }
        }
        event.stopPropagation();
    });

    $('.u-act-create').click(function () {
        window.location.href = "/user/register";
    })
</script>
<script type="text/javascript" src="@Url.Content("~/Scripts/jquery.ba-throttle-debounce.min.js")"></script>
<script type="text/javascript" src="@Url.Content("~/Scripts/jquery.stickyheader.js")"></script>
