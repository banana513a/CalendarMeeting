@model MeetingCanlendar.Models.ChangePassword
@{
    Layout = "~/Views/Shared/_LoginLayout.cshtml";
    ViewBag.Title = "修改密码";
}
<div class="chpwd_box">
    @using (Html.BeginForm())
    {
        @Html.Hidden("UserId", (int)ViewBag.UserId)
    <table border="0" cellspacing="0" cellpadding="0">
        <thead>
            <tr>
                <th colspan="2">@ViewBag.Title</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td class="lb">@Html.LabelFor(m => m.NewPassword)：</td>
                <td class="in_val">@Html.TextBoxFor(m => m.NewPassword)</td>
            </tr>
            <tr class="error">
                <td></td>
                <td class="new_error"></td>
            </tr>
            <tr>
                <td  class="lb">@Html.LabelFor(m => m.NewPasswordConfirm)：</td>
                <td class="in_val">@Html.TextBoxFor(m => m.NewPasswordConfirm)</td>
            </tr>
            <tr class="error">
                <td  class="lb"></td>
                <td class="cfm_error"></td>
            </tr>
            <tr>
                <td class="btn" colspan="2"><input type="submit" class="blue_btn" value="修改" /></td>
            </tr>
        </tbody>
    </table>
    }
</div>
<script type="text/javascript">
    $('#NewPassword').focus(function () {
        $('.new_error').html('');
    });

    $('#NewPasswordConfirm').focus(function () {
        $('.cfm_error').html('');
    });

    var pwdReg = /^\d+$|^[a-z|A-Z]+$/;
    $(document).ready(function () {
        $('form').submit(function () {
            var pwd = $('#NewPassword').val();
            if (pwd == '' || pwdReg.test(pwd)) {
                $('.new_error').html('密码必须包含字母、数字或字符');
                return false;
            }

            var cfm_pwd = $('#NewPasswordConfirm').val();
            if (cfm_pwd == '' || cfm_pwd != pwd) {
                $('.cfm_error').html('确认密码与新密码不一样');
                return false;
            }
        });
    });
</script>

